<ion-header>
  <ion-navbar>
    <ion-title>
      MinneTransit
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

  <form [formGroup]="stopQuery" (ngSubmit)="receiveStopNum()">
    <ion-item>
      <ion-label floating>Stop Number</ion-label>
      <ion-input type="number" formControlName="number" ></ion-input>
      <button ion-button clear icon-only item-end icon-start [disabled]="!stopQuery.valid">
        <ion-icon name="checkmark"></ion-icon>
      </button>
    </ion-item>
  </form>

      <ion-card *ngFor="let stopNum of getKeys(stops)">
        <ion-item>
          <ion-card-header>Stop #{{stopNum}}</ion-card-header>
          <button ion-button clear icon-only item-end icon-start (click)="setNotification(stopNum)">
            <ion-icon [name]="stopsNotification.get(stopNum) ? 'notifications' : 'notifications-off'"></ion-icon>
          </button>
          <button ion-button clear color="danger" icon-only item-end icon-start (click)="closeCard(stopNum)">
            <ion-icon name="close"></ion-icon>
          </button>
        </ion-item>
        <ion-card-content>
          <table style="width:100%">
            <tr>
              <th>Route</th>
              <th></th> 
              <th>Departs</th>
            </tr>
            <tr *ngFor="let departure of getValueArray(stops,stopNum)">
              <td>{{departure.Route}}{{departure.Terminal}}</td>
              <td>{{ departure.Description }}</td> 
              <td>{{departure.DepartureText}} </td>
            </tr>
          </table>
        </ion-card-content>
      </ion-card>
</ion-content>